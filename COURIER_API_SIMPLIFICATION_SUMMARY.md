# –£–ø—Ä–æ—â–µ–Ω–∏–µ API –æ—Ç—á–µ—Ç–æ–≤ –∫—É—Ä—å–µ—Ä–æ–≤ - –†–µ–∑—é–º–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

### ‚úÖ –£–ø—Ä–æ—â–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–æ–≤
- **–†–∞–Ω—å—à–µ**: –°–ª–æ–∂–Ω—ã–µ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫—É—Ä—å–µ—Ä–∞–º, —Ç–æ–ø-–ª–∏—Å—Ç—ã
- **–¢–µ–ø–µ—Ä—å**: –ü—Ä–æ—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º 4 (–¥–æ—Å—Ç–∞–≤–ª–µ–Ω)

### ‚úÖ –£–±—Ä–∞–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç order_history
- **–†–∞–Ω—å—à–µ**: JOIN —Å —Ç–∞–±–ª–∏—Ü–µ–π order_history –¥–ª—è –≤—Ä–µ–º–µ–Ω–∏ –¥–æ—Å—Ç–∞–≤–∫–∏
- **–¢–µ–ø–µ—Ä—å**: –¢–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã orders

### ‚úÖ –§–æ–∫—É—Å –Ω–∞ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–∞—Ö
- –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∑–∞–∫–∞–∑—ã —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º 4
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫—É—Ä—å–µ—Ä–µ –≤–∫–ª—é—á–∞–µ—Ç—Å—è, –µ—Å–ª–∏ –∫—É—Ä—å–µ—Ä –Ω–∞–∑–Ω–∞—á–µ–Ω
- –ó–∞–∫–∞–∑—ã –±–µ–∑ –∫—É—Ä—å–µ—Ä–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Å courier: null

## –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ API

### 1. GET /api/businesses/reports/couriers
```json
{
  "summary": {
    "total_delivered_orders": 25,
    "orders_with_courier": 20,
    "orders_without_courier": 5,
    "total_revenue": 125000,
    "total_delivery_revenue": 12500
  },
  "orders": [
    {
      "order_id": 1234,
      "courier": {
        "courier_id": 5,
        "login": "courier_ivan", 
        "name": "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤"
      },
      "delivery_price": 500,
      "total_sum": 5000,
      "order_created": "2025-08-10T15:30:00Z"
    }
  ]
}
```

### 2. GET /api/businesses/reports/courier/:courierId  
```json
{
  "courier_info": {
    "courier_id": 5,
    "login": "courier_ivan",
    "full_name": "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤"
  },
  "statistics": {
    "total_delivered_orders": 15,
    "total_earnings": 7500,
    "avg_delivery_price": 500
  },
  "orders": [...]
}
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —É–ø—Ä–æ—â–µ–Ω–∏—è

### üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –ú–µ–Ω—å—à–µ —Å–ª–æ–∂–Ω—ã—Ö JOIN –æ–ø–µ—Ä–∞—Ü–∏–π
- –ë—ã—Å—Ç—Ä–µ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤
- –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏

### üìä –ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –ü–æ–Ω—è—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
- –õ–µ–≥–∫–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ frontend
- –ú–∏–Ω–∏–º—É–º –ª–∏—à–Ω–µ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

### üîß –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ
- –ü—Ä–æ—â–µ –æ—Ç–ª–∞–¥–∫–∞ SQL –∑–∞–ø—Ä–æ—Å–æ–≤
- –ú–µ–Ω—å—à–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏
- –£–ø—Ä–æ—â–µ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

## –°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ YYYY-MM-DD HH:mm:ss
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –¥–∞—Ç
- –ì–∏–±–∫–∏–µ —Ñ–æ—Ä–º–∞—Ç—ã –≤–≤–æ–¥–∞

### ‚úÖ –ë–∏–∑–Ω–µ—Å-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- –¢–æ–∫–µ–Ω–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞
- –ò–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ –±–∏–∑–Ω–µ—Å–∞–º
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –Ω–∞ —É—Ä–æ–≤–Ω–µ middleware

### ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞—Ç –∏ —Ñ–æ—Ä–º–∞—Ç–æ–≤
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

## –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã

1. **src/controllers/businessController.ts**
   - –£–ø—Ä–æ—â–µ–Ω—ã –º–µ—Ç–æ–¥—ã getCouriersDeliveryReport() –∏ getCourierDetailedReport()
   - –£–±—Ä–∞–Ω—ã —Å–ª–æ–∂–Ω—ã–µ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –∏ JOIN —Å order_history
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞—Ç

2. **SIMPLIFIED_COURIER_REPORTS_API.md**
   - –ù–æ–≤–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
   - –ü—Ä–∏–º–µ—Ä—ã —É–ø—Ä–æ—â–µ–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
   - –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è –ø–æ–ª–µ–π

3. **test-courier-reports.html**
   - –û–±–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
   - –ò–∑–º–µ–Ω–µ–Ω–æ –æ–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω—ã –ø–æ–ª—è –≤–≤–æ–¥–∞ –∏ —Ñ—É–Ω–∫—Ü–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏

### –î–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
```javascript
// –°—Ç–∞—Ä—ã–π –∫–æ–¥
const topCouriers = response.data.top_couriers;
const dailyStats = response.data.daily_statistics;

// –ù–æ–≤—ã–π –∫–æ–¥  
const orders = response.data.orders;
const withCourier = orders.filter(o => o.courier !== null);
const revenue = response.data.summary.total_revenue;
```

### –î–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ç–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ –≤—ã—á–∏—Å–ª—è—Ç—å –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫—É –ø–æ –∫—É—Ä—å–µ—Ä–∞–º –¥–µ–ª–∞—Ç—å –≤ JavaScript
- –î–∞–Ω–Ω—ã–µ –ø–æ –¥–Ω—è–º –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ

## –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **–ë–æ–ª–µ–µ –±—ã—Å—Ç—Ä—ã–π API** - –ø—Ä–æ—Å—Ç—ã–µ –∑–∞–ø—Ä–æ—Å—ã –±–µ–∑ —Å–ª–æ–∂–Ω—ã—Ö –∞–≥—Ä–µ–≥–∞—Ü–∏–π  
‚úÖ **–ë–æ–ª–µ–µ –ø–æ–Ω—è—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** - –ø—Ä—è–º–æ–π —Å–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤ —Å –∫—É—Ä—å–µ—Ä–∞–º–∏  
‚úÖ **–ë–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞** - –º–µ–Ω—å—à–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏  
‚úÖ **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å** - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç
