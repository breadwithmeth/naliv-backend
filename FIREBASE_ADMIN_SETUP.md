# üî• –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Firebase Admin SDK

## –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è Service Account –∫–ª—é—á–∞

### 1. –ó–∞–π–¥–∏—Ç–µ –≤ Firebase Console
- –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://console.firebase.google.com/
- –í–æ–π–¥–∏—Ç–µ –≤ —Å–≤–æ–π Google –∞–∫–∫–∞—É–Ω—Ç

### 2. –í—ã–±–µ—Ä–∏—Ç–µ –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç
- –ï—Å–ª–∏ —É –≤–∞—Å —É–∂–µ –µ—Å—Ç—å Firebase –ø—Ä–æ–µ–∫—Ç - –≤—ã–±–µ—Ä–∏—Ç–µ –µ–≥–æ
- –ï—Å–ª–∏ –Ω–µ—Ç - —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –Ω–∞–∂–∞–≤ "Add project"

### 3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞
- –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∏–∫–æ–Ω–∫—É —à–µ—Å—Ç–µ—Ä–µ–Ω–∫–∏ ‚öôÔ∏è —Ä—è–¥–æ–º —Å "Project Overview"
- –í—ã–±–µ—Ä–∏—Ç–µ "Project settings"

### 4. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "Service accounts"
- –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞–π–¥–∏—Ç–µ –≤–∫–ª–∞–¥–∫—É **"Service accounts"**
- –ò–ª–∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –ø—Ä—è–º–æ–π —Å—Å—ã–ª–∫–µ: `https://console.firebase.google.com/project/YOUR_PROJECT_ID/settings/serviceaccounts/adminsdk`

### 5. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á
- –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"Generate new private key"**
- –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–∞–∂–∞–≤ **"Generate key"**
- –§–∞–π–ª `.json` —Å –∫–ª—é—á–æ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∞–µ—Ç—Å—è

### 6. –ò–∑–≤–ª–µ–∫–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ JSON —Ñ–∞–π–ª–∞
–û—Ç–∫—Ä–æ–π—Ç–µ —Å–∫–∞—á–∞–Ω–Ω—ã–π JSON —Ñ–∞–π–ª. –û–Ω –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫:

\`\`\`json
{
  "type": "service_account",
  "project_id": "your-project-id",
  "private_key_id": "key-id",
  "private_key": "-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQC...\\n-----END PRIVATE KEY-----\\n",
  "client_email": "firebase-adminsdk-xxxxx@your-project-id.iam.gserviceaccount.com",
  "client_id": "client-id",
  "auth_uri": "https://accounts.google.com/o/oauth2/auth",
  "token_uri": "https://oauth2.googleapis.com/token",
  ...
}
\`\`\`

### 7. –û–±–Ω–æ–≤–∏—Ç–µ .env —Ñ–∞–π–ª

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ JSON —Ñ–∞–π–ª–∞ –≤ –≤–∞—à `.env` —Ñ–∞–π–ª:

\`\`\`env
# Firebase Admin SDK Configuration
FIREBASE_PROJECT_ID=your-project-id
FIREBASE_CLIENT_EMAIL=firebase-adminsdk-xxxxx@your-project-id.iam.gserviceaccount.com
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQC...\\n-----END PRIVATE KEY-----"
\`\`\`

**‚ö†Ô∏è –í–∞–∂–Ω–æ:** 
- –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –∫–∞–≤—ã—á–∫–∞—Ö
- –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –≤—Å–µ `\\n` —Å–∏–º–≤–æ–ª—ã –∫–∞–∫ –µ—Å—Ç—å
- –ù–µ —É–±–∏—Ä–∞–π—Ç–µ `-----BEGIN PRIVATE KEY-----` –∏ `-----END PRIVATE KEY-----`

### 8. –í–∫–ª—é—á–∏—Ç–µ Cloud Messaging API
- –í Google Cloud Console –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –≤–∞—à –ø—Ä–æ–µ–∫—Ç
- –ù–∞–π–¥–∏—Ç–µ "Cloud Messaging API" –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ API
- –í–∫–ª—é—á–∏—Ç–µ —ç—Ç–æ—Ç API –µ—Å–ª–∏ –æ–Ω –Ω–µ –≤–∫–ª—é—á–µ–Ω

## üì± –ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ .env

\`\`\`env
# Firebase Admin SDK Configuration
FIREBASE_PROJECT_ID=naliv-app-12345
FIREBASE_CLIENT_EMAIL=firebase-adminsdk-abc123@naliv-app-12345.iam.gserviceaccount.com
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDExample...\\n-----END PRIVATE KEY-----"
\`\`\`

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ** —Ä–µ–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏ –≤ git
2. –î–æ–±–∞–≤—å—Ç–µ `.env` –≤ `.gitignore`
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã –¥–ª—è development –∏ production
4. –†–µ–≥—É–ª—è—Ä–Ω–æ —Ä–æ—Ç–∏—Ä—É–π—Ç–µ Service Account –∫–ª—é—á–∏
5. –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –ø—Ä–∞–≤–∞ Service Account —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:

\`\`\`bash
npm run dev
\`\`\`

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
\`\`\`
‚úÖ Firebase Admin SDK —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
\`\`\`

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ:
\`\`\`
Firebase Admin SDK –Ω–µ —É–¥–∞–ª–æ—Å—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å: [–æ—à–∏–±–∫–∞]
Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –±—É–¥—É—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã
\`\`\`

–ó–Ω–∞—á–∏—Ç –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –≤ `.env` —Ñ–∞–π–ª–µ.

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ `test-notifications-api.html`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å—Ç—å FCM —Ç–æ–∫–µ–Ω (—á–µ—Ä–µ–∑ `/api/users/fcm-token`)
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ—è–≤–∏–ª–æ—Å—å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∏ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ

## üÜö –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–∞–¥ —Å—Ç–∞—Ä—ã–º –ø–æ–¥—Ö–æ–¥–æ–º

| –°—Ç–∞—Ä—ã–π (Server Key) | –ù–æ–≤—ã–π (Admin SDK) |
|---------------------|-------------------|
| –£—Å—Ç–∞—Ä–µ–≤—à–∏–π API | –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π API |
| –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å | –ü–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π |
| HTTP –∑–∞–ø—Ä–æ—Å—ã | –ù–∞—Ç–∏–≤–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ |
| –ú–µ–Ω–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π | –ë–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π |
| –°–ª–æ–∂–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ | –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ |
